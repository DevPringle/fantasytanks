<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NA 15v15 Summer Series - WoT Fantasy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet">
    <style>
        /* Material Icons fallback */
        .material-icons {
            font-family: 'Material Icons', 'Material Icons Outlined', sans-serif;
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: rgba(15, 20, 25, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 36px;
            width: auto;
            max-width: 220px;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));
        }

        .logo:hover img {
            transform: scale(1.05);
            filter: drop-shadow(0 0 30px rgba(0, 212, 255, 0.5));
        }

        .nav-menu {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .nav-link {
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover {
            color: #00d4ff;
            transform: translateY(-2px);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #00d4ff, #00b8e6);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-menu {
            position: relative;
        }

        .user-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .user-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.5);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: rgba(15, 20, 25, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 0.5rem;
            min-width: 200px;
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }

        .user-dropdown.show {
            display: block;
            animation: fadeInDown 0.3s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .dropdown-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 0.5rem 0;
        }

        .sign-in-btn {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, #00d4ff, #00b8e6);
            border: none;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
        }

        .sign-in-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 212, 255, 0.4);
            background: linear-gradient(135deg, #00b8e6, #00d4ff);
        }

        .mobile-toggle {
            display: none;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        /* Tournament Header */
        .tournament-header {
            background: 
                radial-gradient(circle at 30% 20%, rgba(0, 212, 255, 0.15), transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(0, 184, 230, 0.1), transparent 50%),
                linear-gradient(135deg, rgba(0, 212, 255, 0.05), rgba(26, 35, 50, 0.2));
            padding: 3rem 0 2rem;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tournament-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
        }

        .tournament-header-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .tournament-info {
            flex: 1;
            min-width: 300px;
        }

        .tournament-breadcrumb {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tournament-breadcrumb a {
            color: #00d4ff;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .tournament-breadcrumb a:hover {
            color: #ffffff;
        }

        .tournament-name {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #00d4ff 0%, #00b8e6 50%, #0099cc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .tournament-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        .meta-icon {
            color: #00d4ff;
            font-size: 1.2rem;
        }

        .tournament-status-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .status-badge {
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.4);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.2);
            transition: all 0.3s ease;
        }

        .status-badge.locked {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.2);
        }

        .cutoff-timer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            border: 1px solid rgba(255, 193, 7, 0.4);
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 0 15px rgba(255, 193, 7, 0.2);
            animation: pulse 2s infinite;
        }

        .timer-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(255, 193, 7, 0.2);
            }
            50% { 
                box-shadow: 0 0 25px rgba(255, 193, 7, 0.4);
            }
        }

        .fantasy-info {
            text-align: right;
        }

        .fantasy-stat {
            font-size: 2rem;
            font-weight: 800;
            color: #00d4ff;
            margin-bottom: 0.5rem;
        }

        .fantasy-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .roster-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .action-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #00d4ff, #00b8e6);
            border: none;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: none;
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.5);
        }

        /* Tournament Navigation */
        .tournament-nav {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 80px;
            z-index: 999;
        }

        .tournament-nav-container {
            display: flex;
            justify-content: center;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tournament-nav-container::-webkit-scrollbar {
            display: none;
        }

        .nav-tabs {
            display: flex;
            gap: 0;
            list-style: none;
            min-width: max-content;
        }

        .nav-tab {
            padding: 1.2rem 2rem;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 3px solid transparent;
            position: relative;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-tab:hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-tab.active {
            color: #00d4ff;
            border-bottom-color: #00d4ff;
            background: rgba(0, 212, 255, 0.05);
        }

        /* Main Content Area */
        .tournament-content {
            padding: 3rem 0;
            min-height: 60vh;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Overview Tab */
        .overview-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .overview-main {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2.5rem;
            backdrop-filter: blur(10px);
        }

        .overview-sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-subtitle {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tournament-description {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.7;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .progress-section {
            margin-bottom: 2rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            background: linear-gradient(135deg, #00d4ff, #00b8e6);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .quick-stat {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .quick-stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00d4ff;
            display: block;
            margin-bottom: 0.5rem;
        }

        .quick-stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Top Teams List */
        .teams-list {
            list-style: none;
        }

        .team-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .team-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .team-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .team-rank {
            font-weight: 700;
            color: #00d4ff;
            min-width: 2rem;
        }

        .team-name {
            font-weight: 600;
            color: #ffffff;
        }

        .team-score {
            font-weight: 600;
            color: #00d4ff;
        }

        /* Recent Activity */
        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            color: #00d4ff;
            font-size: 1.2rem;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }

        .activity-time {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }

        /* Match Day Selector */
        .match-day-selector {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .match-day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .match-day-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .match-day-tabs {
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            border-radius: 10px;
            flex-wrap: wrap;
        }

        .match-day-tab {
            padding: 0.6rem 1rem;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .match-day-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .match-day-tab.active {
            background: linear-gradient(135deg, #00d4ff, #00b8e6);
            border-color: #00d4ff;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .match-day-tab.locked {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
            cursor: not-allowed;
        }

        .match-day-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .roster-status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .roster-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
        }

        .roster-status-dot.incomplete {
            background: #ffc107;
        }

        .roster-status-dot.empty {
            background: #6b7280;
        }

        /* Players Tab Styles */
        .players-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .players-filters {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-group label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .filter-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            min-width: 120px;
        }

        .filter-select option {
            background: #1a2332;
            color: #ffffff;
        }

        .show-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .players-table-container {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            margin-bottom: 2rem;
        }

        .players-table {
            width: 100%;
            border-collapse: collapse;
        }

        .players-table th {
            background: rgba(255, 255, 255, 0.08);
            padding: 1rem;
            text-align: left;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .players-table th:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .players-table th .sort-icon {
            font-size: 1rem;
            vertical-align: middle;
            margin-left: 5px;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .players-table th.sorted .sort-icon {
            opacity: 1;
            color: #00d4ff;
        }

        .players-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.8);
        }

        .players-table tr:last-child td {
            border-bottom: none;
        }

        .players-table tbody tr {
            transition: background 0.3s ease;
        }

        .players-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #00d4ff;
        }

        .player-name {
            font-weight: 600;
            color: #ffffff;
            white-space: nowrap;
        }

        .player-stats span {
            display: block;
            font-size: 0.9rem;
        }

        .stat-main {
            font-weight: 600;
            color: #00d4ff;
        }

        .stat-sub {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .roster-actions {
            display: flex;
            gap: 0.5rem;
        }

        .roster-btn {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            border: 1px solid rgba(0, 212, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .roster-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
            transform: translateY(-2px);
        }

        .roster-btn.remove {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .roster-btn.remove:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .overview-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .mobile-toggle {
                display: block;
            }

            .nav {
                flex-wrap: wrap;
            }

            .logo {
                flex: 1;
            }

            .auth-section {
                flex: 1;
                justify-content: flex-end;
            }

            .tournament-header-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .fantasy-info {
                text-align: center;
                margin-top: 2rem;
            }

            .tournament-name {
                font-size: 2.5rem;
            }

            .match-day-tabs {
                justify-content: center;
            }
            
            .players-filters {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .players-table-container {
                overflow-x: auto;
            }

            .players-table {
                min-width: 700px; /* Ensure table is scrollable */
            }
        }

        @media (max-width: 480px) {
            .match-day-tab {
                min-width: unset;
                flex: 1;
            }
            .filter-select {
                min-width: unset;
                width: 100%;
            }
            .action-btn {
                width: 100%;
                justify-content: center;
            }
            .roster-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="#" class="logo">
                    <img src="https://fantasytanks-production.up.railway.app/logo.png" alt="WoT Fantasy Logo">
                </a>
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link">Home</a></li>
                    <li><a href="#" class="nav-link">Tournaments</a></li>
                    <li><a href="#" class="nav-link">About</a></li>
                    <li><a href="#" class="nav-link">Contact</a></li>
                </ul>
                <div class="auth-section">
                    <div class="user-menu" id="userMenu" style="display: none;">
                        <button class="user-btn" id="userButton">
                            <span id="usernameDisplay"></span>
                            <span class="material-icons">arrow_drop_down</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#" class="dropdown-item"><span class="material-icons">person</span> Profile</a>
                            <a href="#" class="dropdown-item"><span class="material-icons">settings</span> Settings</a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item" id="logoutButton"><span class="material-icons">logout</span> Logout</a>
                        </div>
                    </div>
                    <button class="sign-in-btn" id="signInButton">Sign In</button>
                </div>
                <button class="mobile-toggle material-icons" id="mobileToggle">menu</button>
            </nav>
        </div>
    </header>

    <main>
        <section class="tournament-header">
            <div class="container tournament-header-content">
                <div class="tournament-info">
                    <div class="tournament-breadcrumb">
                        <a href="#">Tournaments</a> <span class="material-icons">chevron_right</span> <span>NA 15v15 Summer Series</span>
                    </div>
                    <h1 class="tournament-name">NA 15v15 Summer Series</h1>
                    <div class="tournament-meta">
                        <div class="meta-item"><span class="material-icons meta-icon">calendar_today</span> July 1 - August 31, 2024</div>
                        <div class="meta-item"><span class="material-icons meta-icon">groups</span> 15v15 Format</div>
                        <div class="meta-item"><span class="material-icons meta-icon">paid</span> $5,000 Prize Pool</div>
                        <div class="meta-item"><span class="material-icons meta-icon">star</span> Fantasy Draft</div>
                    </div>
                    <div class="tournament-status-header">
                        <span class="status-badge">Ongoing</span>
                        <div class="cutoff-timer">
                            <span class="material-icons">schedule</span>
                            <span class="timer-label">Next Cutoff:</span>
                            <span id="countdownTimer">Loading...</span>
                        </div>
                    </div>
                    <div class="roster-actions">
                        <a href="#" class="action-btn" id="createRosterBtn"><span class="material-icons">group_add</span> Create Roster</a>
                        <a href="#" class="action-btn secondary" id="viewMyRosterBtn" style="display: none;"><span class="material-icons">visibility</span> View My Roster</a>
                    </div>
                </div>
                <div class="fantasy-info">
                    <div class="fantasy-stat" id="totalPlayers">0</div>
                    <div class="fantasy-label">Total Players Picked</div>
                </div>
            </div>
        </section>

        <nav class="tournament-nav">
            <div class="container tournament-nav-container">
                <ul class="nav-tabs">
                    <li><a href="#overview" class="nav-tab active" data-tab="overview"><span class="material-icons">dashboard</span> Overview</a></li>
                    <li><a href="#players" class="nav-tab" data-tab="players"><span class="material-icons">people</span> Players</a></li>
                    <li><a href="#leaderboard" class="nav-tab" data-tab="leaderboard"><span class="material-icons">emoji_events</span> Leaderboard</a></li>
                    <li><a href="#rules" class="nav-tab" data-tab="rules"><span class="material-icons">gavel</span> Rules</a></li>
                </ul>
            </div>
        </nav>

        <section class="tournament-content">
            <div class="container">
                <div id="overview" class="tab-content active">
                    <div class="overview-grid">
                        <div class="overview-main">
                            <h2 class="section-title"><span class="material-icons">info</span> Tournament Overview</h2>
                            <p class="tournament-description">
                                Welcome to the NA 15v15 Summer Series Fantasy League! This is your chance to draft your dream team of World of Tanks players and compete for glory and prizes. The tournament runs from July 1st to August 31st, 2024, featuring intense 15v15 battles. Follow your chosen players' performance and climb the leaderboard!
                            </p>
                            <div class="progress-section">
                                <div class="progress-label">
                                    <span>Tournament Progress</span>
                                    <span id="tournamentProgressText">0% Complete</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%;" id="tournamentProgressBar"></div>
                                </div>
                            </div>
                            <h3 class="section-subtitle"><span class="material-icons">insights</span> Quick Stats</h3>
                            <div class="quick-stats">
                                <div class="quick-stat">
                                    <span class="quick-stat-number" id="totalMatchDays">0</span>
                                    <span class="quick-stat-label">Total Match Days</span>
                                </div>
                                <div class="quick-stat">
                                    <span class="quick-stat-number" id="completedMatchDays">0</span>
                                    <span class="quick-stat-label">Match Days Completed</span>
                                </div>
                                <div class="quick-stat">
                                    <span class="quick-stat-number" id="activePlayers">0</span>
                                    <span class="quick-stat-label">Active Players</span>
                                </div>
                                <div class="quick-stat">
                                    <span class="quick-stat-number" id="totalTeams">0</span>
                                    <span class="quick-stat-label">Registered Teams</span>
                                </div>
                            </div>
                        </div>
                        <div class="overview-sidebar">
                            <div class="sidebar-card">
                                <h3 class="section-subtitle"><span class="material-icons">leaderboard</span> Top 5 Teams (Overall)</h3>
                                <ul class="teams-list" id="topTeamsList">
                                    <li>Loading...</li>
                                </ul>
                            </div>
                            <div class="sidebar-card">
                                <h3 class="section-subtitle"><span class="material-icons">history</span> Recent Activity</h3>
                                <ul class="activity-list" id="recentActivityList">
                                    <li class="activity-item">
                                        <span class="material-icons activity-icon">update</span>
                                        <div class="activity-content">
                                            <div class="activity-text">Scores updated for Match Day 5.</div>
                                            <div class="activity-time">2 hours ago</div>
                                        </div>
                                    </li>
                                    <li class="activity-item">
                                        <span class="material-icons activity-icon">person_add</span>
                                        <div class="activity-content">
                                            <div class="activity-text">Player "PlayerX" added to the roster of "Team Alpha".</div>
                                            <div class="activity-time">1 day ago</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="players" class="tab-content">
                    <h2 class="section-title"><span class="material-icons">people</span> All Players</h2>
                    <div class="players-header">
                        <div class="players-filters">
                            <div class="filter-group">
                                <label for="playerSearch">Search:</label>
                                <input type="text" id="playerSearch" class="filter-select" placeholder="Player Name">
                            </div>
                            <div class="filter-group">
                                <label for="teamFilter">Team:</label>
                                <select id="teamFilter" class="filter-select">
                                    <option value="">All Teams</option>
                                    </select>
                            </div>
                        </div>
                        <div class="show-label">Displaying <span id="displayedPlayersCount">0</span> of <span id="totalPlayersCount">0</span> players</div>
                    </div>
                    
                    <div class="players-table-container">
                        <table class="players-table">
                            <thead>
                                <tr>
                                    <th>Player</th>
                                    <th data-sort-column="match_points">Points <span class="material-icons sort-icon">unfold_more</span></th>
                                    <th data-sort-column="battles_played">Battles <span class="material-icons sort-icon">unfold_more</span></th>
                                    <th data-sort-column="total_battles">Total Battles <span class="material-icons sort-icon">unfold_more</span></th>
                                    <th data-sort-column="avg">Avg. Points <span class="material-icons sort-icon">unfold_more</span></th>
                                    <th data-sort-column="picked">Picked % <span class="material-icons sort-icon">unfold_more</span></th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="playersTableBody">
                                <tr><td colspan="7" style="text-align: center; padding: 2rem;">Loading players...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="leaderboard" class="tab-content">
                    <h2 class="section-title"><span class="material-icons">emoji_events</span> Match Day Leaderboard</h2>
                    <div class="match-day-selector">
                        <div class="match-day-header">
                            <div class="match-day-title">
                                <span class="material-icons">date_range</span> Select Match Day:
                            </div>
                            <div class="match-day-tabs" id="matchDayTabs">
                                <button class="match-day-tab active" data-match-day="1">Day 1</button>
                                <button class="match-day-tab" data-match-day="2">Day 2</button>
                                <button class="match-day-tab locked" data-match-day="3">Day 3 (Locked)</button>
                            </div>
                        </div>
                        <div class="match-day-info">
                            <span id="matchDayStatus">Status: <span class="roster-status-indicator"><span class="roster-status-dot complete"></span> Complete</span></span>
                            <span id="matchDayDate">Date: July 5, 2024</span>
                        </div>
                    </div>

                    <div class="players-table-container">
                        <table class="players-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Player</th>
                                    <th>Team</th>
                                    <th>Points</th>
                                    <th>Battles</th>
                                    <th>Total Battles</th>
                                    <th>Updated At</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardTableBody">
                                <tr><td colspan="7" style="text-align: center; padding: 2rem;">Select a match day to view the leaderboard.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="rules" class="tab-content">
                    <h2 class="section-title"><span class="material-icons">gavel</span> Tournament Rules</h2>
                    <div class="overview-main">
                        <p class="tournament-description">
                            <h3>1. General Rules</h3>
                            <ul>
                                <li>All participants must adhere to the World of Tanks End User License Agreement and Game Rules.</li>
                                <li>Fair play is paramount. Any form of cheating, exploiting bugs, or unsportsmanlike conduct will result in immediate disqualification.</li>
                                <li>Decisions made by the tournament organizers are final.</li>
                            </ul>

                            <h3>2. Fantasy League Specifics</h3>
                            <ul>
                                <li>Each participant will draft a roster of 7 players from the eligible player pool.</li>
                                <li>Player scores are based on their performance in official NA 15v15 Summer Series matches.</li>
                                <li>Scoring will be calculated based on a proprietary points system (details to be provided separately).</li>
                                <li>Rosters can be updated between match days, up until the specified cutoff time for each match day.</li>
                            </ul>

                            <h3>3. Prize Distribution</h3>
                            <ul>
                                <li>The total prize pool of $5,000 USD will be distributed among the top-ranked fantasy teams.</li>
                                <li>Specific prize breakdown will be announced before the tournament commences.</li>
                                <li>Prizes will be disbursed within 30 days of the tournament's conclusion.</li>
                            </ul>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 WoT Fantasy. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        import { FantasyAPI } from './api-gemini.js'; // Ensure this path is correct

        const api = new FantasyAPI();

        let playersData = []; // Stores all players for filtering/sorting
        let leaderboardData = []; // Stores leaderboard data for the selected match day

        const tournamentId = 'NA15v15SummerSeries'; // Hardcode for now, will fetch dynamically later
        let currentMatchDay = 1; // Default to Match Day 1

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Initialize user authentication display
                updateAuthDisplay();

                // Load initial tournament data
                await loadTournamentOverview();
                await loadMatchDayTabs();
                await loadAllPlayers();
                await loadFantasyLeaderboard(currentMatchDay); // Load leaderboard for default match day

                // Event Listeners for Tab Navigation
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', function(event) {
                        event.preventDefault();
                        const targetTab = this.getAttribute('data-tab');
                        document.querySelectorAll('.tab-content').forEach(content => {
                            content.classList.remove('active');
                        });
                        document.querySelectorAll('.nav-tab').forEach(t => {
                            t.classList.remove('active');
                        });
                        document.getElementById(targetTab).classList.add('active');
                        this.classList.add('active');
                    });
                });

                // Event Listener for Match Day Tabs
                document.getElementById('matchDayTabs').addEventListener('click', async (event) => {
                    if (event.target.classList.contains('match-day-tab')) {
                        const newMatchDay = parseInt(event.target.getAttribute('data-match-day'));
                        if (newMatchDay && newMatchDay !== currentMatchDay) {
                            currentMatchDay = newMatchDay;
                            document.querySelectorAll('.match-day-tab').forEach(tab => {
                                tab.classList.remove('active');
                            });
                            event.target.classList.add('active');
                            await loadFantasyLeaderboard(currentMatchDay);
                        }
                    }
                });

                // Player Search and Filter Listeners
                document.getElementById('playerSearch').addEventListener('input', filterPlayers);
                document.getElementById('teamFilter').addEventListener('change', filterPlayers);

                // Sort table listeners
                document.querySelectorAll('.players-table th').forEach(header => {
                    header.addEventListener('click', function() {
                        const column = this.getAttribute('data-sort-column');
                        if (column) {
                            let direction = 'asc';
                            if (this.classList.contains('sorted')) {
                                direction = this.classList.contains('asc') ? 'desc' : 'asc';
                            }
                            
                            // Remove sorted class from all headers
                            document.querySelectorAll('.players-table th').forEach(th => {
                                th.classList.remove('sorted', 'asc', 'desc');
                            });

                            // Add sorted class to current header
                            this.classList.add('sorted', direction);
                            sortTable(column, direction);
                        }
                    });
                });


                // Auth related event listeners
                document.getElementById('signInButton').addEventListener('click', redirectToLogin);
                document.getElementById('logoutButton').addEventListener('click', handleLogout);
                document.getElementById('userButton').addEventListener('click', toggleUserDropdown);

                // Close dropdown if clicked outside
                window.addEventListener('click', function(event) {
                    const userMenu = document.getElementById('userMenu');
                    if (userMenu && !userMenu.contains(event.target)) {
                        document.getElementById('userDropdown').classList.remove('show');
                    }
                });
                
                console.log('Tournament page fully loaded!');
                
            } catch (error) {
                console.error('Error during page initialization:', error);
            }
        });

        function updateAuthDisplay() {
            const user = localStorage.getItem('user');
            const userMenu = document.getElementById('userMenu');
            const signInButton = document.getElementById('signInButton');
            const usernameDisplay = document.getElementById('usernameDisplay');

            if (user) {
                const userData = JSON.parse(user);
                usernameDisplay.textContent = userData.username;
                userMenu.style.display = 'block';
                signInButton.style.display = 'none';
            } else {
                userMenu.style.display = 'none';
                signInButton.style.display = 'block';
            }
        }

        async function loadTournamentOverview() {
            // Placeholder for fetching actual tournament overview data
            // For now, using static data or basic calculations
            const totalMatchDays = 10; // Example
            const completedMatchDays = 5; // Example
            const totalPlayersPicked = 120; // Example

            document.getElementById('totalMatchDays').textContent = totalMatchDays;
            document.getElementById('completedMatchDays').textContent = completedMatchDays;
            document.getElementById('totalPlayers').textContent = totalPlayersPicked;

            const progress = (completedMatchDays / totalMatchDays) * 100;
            document.getElementById('tournamentProgressBar').style.width = `${progress}%`;
            document.getElementById('tournamentProgressText').textContent = `${progress.toFixed(0)}% Complete`;

            // Update cutoff timer - example for July 15, 2024 at 18:00 CDT
            const cutoffDate = new Date('2025-07-15T18:00:00-05:00'); // CDT is UTC-5
            setInterval(() => {
                const now = new Date();
                const timeLeft = cutoffDate - now;

                if (timeLeft <= 0) {
                    document.getElementById('countdownTimer').textContent = 'Tournament Ongoing';
                    document.querySelector('.cutoff-timer').classList.remove('pulse');
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('countdownTimer').textContent = 
                    `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }, 1000);
        }

        async function loadMatchDayTabs() {
            try {
                const response = await api.request(`/tournaments/${tournamentId}/match-days`);
                const matchDays = response.match_days; // Assuming API returns an array of match day numbers or objects

                const matchDayTabsContainer = document.getElementById('matchDayTabs');
                matchDayTabsContainer.innerHTML = ''; // Clear existing tabs

                matchDays.forEach(day => {
                    const button = document.createElement('button');
                    button.classList.add('match-day-tab');
                    button.setAttribute('data-match-day', day.match_day);
                    button.textContent = `Day ${day.match_day}`;
                    if (day.status === 'locked') { // Assuming API provides a status for each match day
                        button.classList.add('locked');
                        button.disabled = true;
                    }
                    if (day.match_day === currentMatchDay) {
                        button.classList.add('active');
                    }
                    matchDayTabsContainer.appendChild(button);
                });

                // Update match day info for the initially active tab
                const initialMatchDayData = matchDays.find(day => day.match_day === currentMatchDay);
                if (initialMatchDayData) {
                    updateMatchDayInfo(initialMatchDayData);
                }

            } catch (error) {
                console.error('Error loading match day tabs:', error);
                // Fallback or error message for the user
                document.getElementById('matchDayTabs').innerHTML = '<p>Could not load match days.</p>';
            }
        }

        function updateMatchDayInfo(matchDayData) {
            const statusIndicator = document.getElementById('matchDayStatus');
            const dateDisplay = document.getElementById('matchDayDate');

            let statusText = 'Unknown';
            let statusClass = 'empty';

            switch (matchDayData.status) {
                case 'complete':
                    statusText = 'Complete';
                    statusClass = 'complete';
                    break;
                case 'ongoing':
                    statusText = 'Ongoing';
                    statusClass = 'incomplete'; // Using incomplete for ongoing as well
                    break;
                case 'locked':
                    statusText = 'Locked';
                    statusClass = 'empty';
                    break;
                default:
                    break;
            }

            statusIndicator.innerHTML = `Status: <span class="roster-status-indicator"><span class="roster-status-dot ${statusClass}"></span> ${statusText}</span>`;
            dateDisplay.textContent = `Date: ${new Date(matchDayData.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}`;
        }


        async function loadAllPlayers() {
            try {
                const response = await api.request('/players');
                playersData = response.players; // Assuming API returns { players: [...] }
                populatePlayersTable(playersData);
                updatePlayerCounts(playersData.length);

                // Populate team filter
                const teamFilter = document.getElementById('teamFilter');
                const teams = [...new Set(playersData.map(p => p.team_name))].filter(Boolean).sort();
                teams.forEach(team => {
                    const option = document.createElement('option');
                    option.value = team;
                    option.textContent = team;
                    teamFilter.appendChild(option);
                });

            } catch (error) {
                console.error('Error loading all players:', error);
                document.getElementById('playersTableBody').innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem;">Failed to load players.</td></tr>';
            }
        }

        function populatePlayersTable(data) {
            const tbody = document.getElementById('playersTableBody');
            tbody.innerHTML = ''; // Clear existing rows

            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem;">No players found.</td></tr>';
                return;
            }

            data.forEach(player => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>
                        <div class="player-info">
                            <img src="${player.avatar_url || 'https://via.placeholder.com/40'}" alt="${player.player_name}" class="player-avatar">
                            <span class="player-name">${player.player_name}</span>
                        </div>
                    </td>
                    <td><span class="stat-main">${player.match_points || 0}</span></td>
                    <td><span class="stat-main">${player.battles_played || 0}</span></td>
                    <td><span class="stat-main">${player.total_battles || 0}</span></td>
                    <td><span class="stat-main">${(player.match_points / (player.battles_played || 1)).toFixed(2)}</span></td>
                    <td><span class="stat-main">--%</span></td> <td>
                        <div class="roster-actions">
                            <button class="roster-btn add-to-roster" data-player-id="${player.id}">Add</button>
                        </div>
                    </td>
                `;
            });
        }

        function filterPlayers() {
            const searchTerm = document.getElementById('playerSearch').value.toLowerCase();
            const teamFilterValue = document.getElementById('teamFilter').value;

            const filteredData = playersData.filter(player => {
                const matchesSearch = player.player_name.toLowerCase().includes(searchTerm);
                const matchesTeam = teamFilterValue === '' || player.team_name === teamFilterValue;
                return matchesSearch && matchesTeam;
            });

            populatePlayersTable(filteredData);
            updatePlayerCounts(filteredData.length);
        }

        function updatePlayerCounts(displayedCount) {
            document.getElementById('displayedPlayersCount').textContent = displayedCount;
            document.getElementById('totalPlayersCount').textContent = playersData.length;
        }

        async function loadFantasyLeaderboard(matchDay) {
            try {
                const response = await api.request(`/admin/scores/${tournamentId}/${matchDay}`);
                leaderboardData = response.player_scores; // Assuming API returns { player_scores: [...] }

                const tbody = document.getElementById('leaderboardTableBody');
                tbody.innerHTML = ''; // Clear existing rows

                if (leaderboardData.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem;">No leaderboard data for this match day.</td></tr>';
                    return;
                }

                leaderboardData.sort((a, b) => b.match_points - a.match_points); // Sort by points for rank

                leaderboardData.forEach((player, index) => {
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>
                            <div class="player-info">
                                <img src="${player.avatar_url || 'https://via.placeholder.com/40'}" alt="${player.player_name}" class="player-avatar">
                                <span class="player-name">${player.player_name}</span>
                            </div>
                        </td>
                        <td>${player.team_name || 'N/A'}</td>
                        <td>${player.match_points || 0}</td>
                        <td>${player.battles_played || 0}</td>
                        <td>${player.total_battles || 0}</td>
                        <td>${new Date(player.updated_at).toLocaleString()}</td>
                    `;
                });

            } catch (error) {
                console.error(`Error loading leaderboard for match day ${matchDay}:`, error);
                document.getElementById('leaderboardTableBody').innerHTML = `<tr><td colspan="7" style="text-align: center; padding: 2rem;">Failed to load leaderboard for Match Day ${matchDay}.</td></tr>`;
            }
        }

        function sortTable(column, direction) {
            playersData.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];
                
                if (column === 'match_points' || column === 'avg') { // Use match_points for points
                    aVal = parseFloat(aVal);
                    bVal = parseFloat(bVal);
                } else if (column === 'battles_played' || column === 'total_battles') { // Use battles_played for battles
                    aVal = parseFloat(aVal);
                    bVal = parseFloat(bVal);
                } else if (column === 'picked') { // 'picked' is a percentage string
                    aVal = parseFloat(aVal.replace('%', ''));
                    bVal = parseFloat(bVal.replace('%', ''));
                } else if (typeof aVal === 'string') {
                    return direction === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
                }
                
                if (direction === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });
            
            populatePlayersTable(playersData); // Re-populate with sorted data
        }

        // Auth related functions
        function redirectToLogin() {
            window.location.href = 'login.html'; // Or your actual login page
        }

        function handleLogout() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('user');
            updateAuthDisplay();
            window.location.reload(); // Reload page to reflect logout
        }

        function toggleUserDropdown() {
            document.getElementById('userDropdown').classList.toggle('show');
        }

        // Make functions globally accessible (if needed for older HTML elements or direct calls)
        window.loadFantasyLeaderboard = loadFantasyLeaderboard; // Keeping this if there's external call
        window.updateAuthDisplay = updateAuthDisplay;
        window.redirectToLogin = redirectToLogin;
        window.handleLogout = handleLogout;
        window.toggleUserDropdown = toggleUserDropdown;
    </script>
</body>
</html>